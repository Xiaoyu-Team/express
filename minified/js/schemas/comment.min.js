var mongoose=require("mongoose");mongoose.Promise=require("bluebird");var ObjectId=mongoose.Schema.ObjectId,CommentSchema=new mongoose.Schema({movie:{type:ObjectId,ref:"Movie"},from:{type:ObjectId,ref:"User"},replay:[{from:{type:ObjectId,ref:"User"},to:{type:ObjectId,ref:"User"},content:String}],content:String,meta:{createAt:{type:Date,default:Date.now()},updateAt:{type:Date,default:Date.now()}}});CommentSchema.statics={findById:function(e,t){return this.findOne({_id:e}).exec(t)},fetch:function(e){return this.find({}).exec(e)}},module.exports=CommentSchema;